<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 1. 实参为对象时，可解构赋值
      function foo({ x, y = 5 }) {
        console.log(x, y)
      }

      foo({})
      foo({ x: 1 })
      foo({ y: 1 })
      foo({ x: 1, y: 2 })
      // foo() // Cannot destructure property 'x' of 'undefined' as it is undefined

      // 2. 解构赋值时设置默认值 & 解构中变量设置默认值
      function foo1({ x, y = 5 } = {}) {
        console.log(x, y)
      }
      foo1()

      function fetch(url, { body = "", method = "GET", headers = {} } = {}) {
        console.log(method)
      }

      function f({ a, b = "world" } = { a: "hello" }) {
        console.log(b)
      }

      // 思考区别
      function m1({ x = 0, y = 0 } = {}) {
        return [x, y]
      }

      function m2({ x, y } = { x: 0, y: 0 }) {
        return [x, y]
      }

      // 无参 或 x,y 都有的情况下 无区别
      // 但是如果 只有x 或者 空对象 或者 对象中有别的属性但是没有xy m2就会出现undefined

      // 3. 参数默认值位置
      // 通常情况下，在函数的尾参数
      // 如果不在，需要显示传入undefined，null也不行
      function f(x = 1, y) {
        console.log([x, y])
      }
      // f(,2) 报错
      f(undefined, 2) // [1,2]
      f(null, 2) // [null,2]
    </script>
  </body>
</html>
